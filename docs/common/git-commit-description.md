> **Правила для ИИ:** генерация сообщений коммитов по Conventional Commits

# Правила оформления сообщений коммита

## Алгоритм генерации

1. Выполнить `git status` и `git diff --staged` для анализа изменений
2. Сформировать заголовок: `type(scope): описание`
   - `type` из списка (см. ниже), строчными буквами
   - `scope` строчными, кратко, опционален
   - `описание` на русском, с маленькой буквы, повелительное наклонение, максимум 50 символов
3. Добавить пустую строку после заголовка
4. В теле — маркированный список изменений (ЧТО и ПОЧЕМУ, прошедшее время, максимум 72 символа)
5. При наличии задачи — футер: `Closes #123` или `Fixes #123`
6. **Показать описание коммита в блоке кода и дождаться подтверждения**
7. **Только после подтверждения:** создать файл `.git-commit-msg.txt` (UTF-8 без BOM), выполнить `git commit -F .git-commit-msg.txt`, удалить файл

**КРИТИЧНО:**

- ВСЕГДА показывать описание и ждать подтверждения перед созданием коммита
- Если пользователь просит изменения — внести изменения, показать обновлённое описание, снова ждать подтверждения

## Формат сообщения

```
type(scope): описание

- детали изменений (прошедшее время)
- мотивация и контекст

Closes #123
```

**Типы (type):**

- `feat` — новая функциональность
- `fix` — исправление бага
- `docs` — изменение документации
- `style` — форматирование кода
- `refactor` — рефакторинг без изменения функциональности
- `perf` — оптимизация производительности
- `test` — добавление/изменение тестов
- `build` — изменения сборки/зависимостей
- `ci` — изменения CI/CD
- `chore` — рутинные задачи (настройки, конфиги)
- `revert` — откат изменений

**Специальные случаи:**

- Breaking change: `type(scope)!: описание` или в теле `BREAKING CHANGE: описание`
- Откат: `revert: <заголовок откатываемого коммита>` + в теле `This reverts commit <hash>.`

## Выбор scope

Scope должен отражать область кодовой базы, на которую влияет изменение. Выбирать кратко и строчными буквами:

- **Модуль/компонент**: `ui`, `auth`, `api`, `database`, `profile`
- **Функциональная область**: `weather`, `payment`, `notification`
- **Конфигурация/инструменты**: `config`, `build`, `ci`, `lint`
- **Документация**:
  - `docs(commit):` — для документации о правилах коммитов
  - `docs(api):` — для документации API
  - `docs(readme):` — для README файлов
  - `docs:` — без scope, если документация общая или scope неочевиден

При выборе scope ориентироваться на:

- Имя изменённого файла/компонента (если оно отражает область)
- Функциональную область, на которую влияет изменение
- Модуль или подсистему проекта

## Примеры

**Новая функциональность:**

```
feat(ui): добавить компонент UserProfile

- создать компонент для отображения профиля пользователя
- добавить поддержку редактирования данных

Closes #45
```

**Исправление бага:**

```
fix(auth): исправить обработку expired токена

- корректно обрабатывать истёкшие токены и перенаправлять на страницу входа
- добавить логирование для отладки
```

**Breaking change:**

```
feat(auth)!: обновить протокол refresh

- добавить повторную валидацию рефреш-токена на сервере
- сменить схему ответа /refresh на unified payload

BREAKING CHANGE: новый формат ответа /refresh требует обновить клиент
```

## Чеклист создания коммита

- [ ] Выполнен `git status` и `git diff --staged`
- [ ] Сформирован заголовок `type(scope): описание`
- [ ] Добавлено тело с маркированным списком изменений
- [ ] Показано описание и получено подтверждение пользователя
- [ ] Создан файл `.git-commit-msg.txt` (UTF-8 без BOM)
- [ ] Выполнен `git commit -F .git-commit-msg.txt`
- [ ] Удалён файл `.git-commit-msg.txt`
