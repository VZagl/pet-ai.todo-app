# Memory Bank System - Правила использования

Этот документ описывает особенности использования Memory Bank System в контексте правил проекта, определенных в `AGENTS.md`.

## Приоритет правил

**КРИТИЧЕСКИ ВАЖНО**: Правила из `AGENTS.md` имеют **приоритет** над инструкциями Memory Bank System. При любых конфликтах применяются правила из `AGENTS.md`.

## Язык общения

### Обязательное требование

- **ВСЕГДА отвечать на русском языке**, даже если примеры в Memory Bank System на английском
- Все сообщения, ответы, подтверждения и отчеты должны быть на русском
- Примеры ответов из Memory Bank System следует адаптировать на русский язык

### Примеры адаптации

❌ **НЕПРАВИЛЬНО** (как в оригинальных примерах Memory Bank):

```
User: VAN
Response: OK VAN - Beginning Initialization Process
```

✅ **ПРАВИЛЬНО** (адаптировано на русский):

```
Пользователь: VAN
Ответ: OK VAN - Начинаю процесс инициализации
```

## Подтверждение изменений

### Обязательное требование

Перед **любыми** операциями создания или изменения файлов Memory Bank необходимо:

1. **Показать план изменений**:
   - Какие файлы будут созданы/изменены
   - Что именно будет изменено
   - Структура создаваемых файлов (если применимо)

2. **Запросить явное подтверждение**:
   - Использовать фразы: "Создать структуру Memory Bank?", "Обновить tasks.md?", "Применить изменения?"
   - Дождаться явного ответа пользователя

3. **Только после подтверждения** выполнять операции

### Исключения

Подтверждение **НЕ требуется** только для:

- Чтения файлов Memory Bank (`read_file`, `grep` и т.п.)
- Проверки существования файлов и директорий
- Анализа содержимого без изменений

### Примеры правильного поведения

✅ **ПРАВИЛЬНО**:

```
Ассистент: "Для инициализации Memory Bank System нужно создать следующую структуру:
- Директория: memory-bank/
- Файлы:
  - memory-bank/tasks.md
  - memory-bank/activeContext.md
  - memory-bank/progress.md
  - memory-bank/projectbrief.md
  - memory-bank/productContext.md
  - memory-bank/systemPatterns.md
  - memory-bank/techContext.md
  - memory-bank/style-guide.md

Создать эту структуру?"
[ЖДЁТ ПОДТВЕРЖДЕНИЯ]
```

✅ **ПРАВИЛЬНО**:

```
Ассистент: "Нужно обновить memory-bank/tasks.md:
- Добавить новую задачу в раздел 'Текущие задачи'
- Обновить статус выполнения

План изменений:
- Строка 5: добавить '- [ ] [Level 2] Добавить аутентификацию пользователя'
- Строка 12: обновить статус 'Implementation' на 'In Progress'

Применить эти изменения?"
[ЖДЁТ ПОДТВЕРЖДЕНИЯ]
```

❌ **НЕПРАВИЛЬНО**:

```
Ассистент: [сразу создает файлы Memory Bank без показа плана и подтверждения]
```

## Работа с режимами Memory Bank

### Режимы работы

Memory Bank System использует следующие режимы:

- **VAN** - Инициализация и входная точка
- **PLAN** - Планирование
- **CREATIVE** - Дизайн-решения
- **BUILD** - Реализация
- **REFLECT** - Рефлексия и обзор
- **ARCHIVE** - Документация

### Адаптация workflow

При использовании любого режима:

1. **Все ответы на русском языке**
2. **Запрашивать подтверждение** перед изменениями файлов
3. **Показывать план** перед применением изменений
4. **Следовать правилам проекта** из `AGENTS.md`

### Пример использования режима VAN

```
Пользователь: /van Инициализировать проект для добавления аутентификации

Ассистент: "OK VAN - Начинаю процесс инициализации

Анализ задачи: Добавление аутентификации пользователя
Определение сложности: Level 3 (Intermediate Feature)

Для продолжения работы нужно:
1. Создать структуру Memory Bank (если не существует)
2. Создать файл memory-bank/tasks.md с описанием задачи
3. Обновить memory-bank/activeContext.md

Создать/обновить эти файлы?"
[ЖДЁТ ПОДТВЕРЖДЕНИЯ]
```

## Структура файлов Memory Bank

### Расположение

Все файлы Memory Bank находятся в директории `memory-bank/` в корне проекта:

- `memory-bank/tasks.md` - Отслеживание задач
- `memory-bank/activeContext.md` - Текущий фокус
- `memory-bank/progress.md` - Статус реализации
- `memory-bank/projectbrief.md` - Основа проекта
- `memory-bank/productContext.md` - Контекст продукта
- `memory-bank/systemPatterns.md` - Паттерны системы
- `memory-bank/techContext.md` - Технический контекст
- `memory-bank/style-guide.md` - Руководство по стилю
- `memory-bank/creative/creative-[feature_name].md` - Решения по дизайну
- `memory-bank/reflection/reflection-[task_id].md` - Рефлексия по задачам
- `memory-bank/archive/archive-[task_id].md` - Архив задач

### Проверка перед созданием

Перед созданием любого файла Memory Bank:

1. Проверить существование директории `memory-bank/`
2. Показать план создания файлов
3. Запросить подтверждение
4. Только после подтверждения создавать файлы

## Интеграция с правилами проекта

### Совместимость

Memory Bank System совместим с:

- ✅ Правилами работы с командной строкой из `AGENTS.md`
- ✅ Правилами использования MCP и Context7
- ✅ Правилами логики рассуждений (sequential thinking)
- ✅ Структурой проекта

### Адаптация команд

При использовании команд Memory Bank System:

- Адаптировать команды под платформу (Windows/PowerShell, Linux/Bash, macOS/Zsh и т.д.)
- Использовать правильные разделители путей (`\` для Windows, `/` для Unix-систем)
- Следовать правилам выполнения команд из `AGENTS.md`

## Чеклист использования Memory Bank System

Перед использованием любого режима Memory Bank:

```
✓ ЧЕКЛИСТ ИСПОЛЬЗОВАНИЯ MEMORY BANK SYSTEM
- Понимаю, что правила из AGENTS.md имеют приоритет? [YES/NO]
- Буду отвечать на русском языке? [YES/NO]
- Буду запрашивать подтверждение перед изменениями файлов? [YES/NO]
- Буду показывать план изменений перед применением? [YES/NO]
- Адаптировал команды под текущую платформу (Windows/PowerShell, Linux/Bash, macOS/Zsh)? [YES/NO]

→ Если все YES: Можно использовать Memory Bank System
→ Если любой NO: Сначала изучить правила из AGENTS.md
```

## Резюме

Memory Bank System - это мощный инструмент для структурированного управления задачами, но его использование должно **полностью соответствовать** правилам проекта, определенным в `AGENTS.md`. При любых конфликтах приоритет имеют правила из `AGENTS.md`.
