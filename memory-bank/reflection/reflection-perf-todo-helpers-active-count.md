# Рефлексия: Оптимизация подсчёта элементов (getActiveCount → reduce)

**Task ID:** perf-todo-helpers-active-count  
**Уровень сложности:** Level 1 (Quick Fix)  
**Дата:** 2026-02-02

---

## Summary

В `src/utils/todo-helpers.ts` функция `getActiveCount` переписана с `todos.filter((todo) => !todo.completed).length` на `todos.reduce((count, todo) => count + (!todo.completed ? 1 : 0), 0)`, чтобы не создавать промежуточный массив при подсчёте активных задач. Цель достигнута: один файл, тесты без изменений (10/10), поведение сохранено.

---

## What Went Well

- Изменение локализовано в одной функции одного файла.
- Существующие тесты `todo-helpers.test.ts` покрывают `getActiveCount` и продолжают проходить без правок.
- Семантика и API функции не изменились — регрессий нет.
- Задача из backlog выполнена полностью (чеклист закрыт, backlog обновлён).

---

## Challenges

- Сложностей не было: замена прямолинейная, тесты уже проверяли результат.

---

## Lessons Learned

- Для «подсчёт по условию» предпочтительнее `reduce`, чем `filter().length`: меньше аллокаций, один проход по массиву.
- Level 1-оптимизации хорошо укладываются в формат: одна цель, один файл, быстрая верификация тестами.

---

## Next Steps

- При необходимости — команда `/archive` (для Level 1 архивирование не обязательно).
- Memory Bank готов к следующей задаче.
