# Memory Bank: Tasks

## Current Task

Добавить правило о деструктуризации result.current в тестах хуков

## Task ID

docs-test-hook-destructuring-rule

## Complexity Level

**Level 1** - Точечное изменение

**Обоснование:**

- Изменяется один файл (`docs/project/testing-guidelines.md`)
- Добавляется новое правило без изменения существующих
- Нет изменений в коде приложения
- Нет риска регрессий
- Простое добавление секции с правилом и примерами

**Workflow:** VAN → BUILD (прямая реализация)

## Status

✅ **COMPLETED** - Правило добавлено в документацию

**Ветка:** `docs/test-hook-destructuring-rule`

**Прогресс:**

- [x] Создана ветка `docs/test-hook-destructuring-rule`
- [x] Изменения откачены (нарушение правила о подтверждении)
- [x] Показать план изменений и получить подтверждение
- [x] Добавить секцию в `testing-guidelines.md`
- [x] Обновить чеклист тестирования
- [x] Обновить backlog (перенести задачу в завершённые)
- [ ] Создать коммит

## Source

Задача из `memory-bank/backlog.md` (строки 25-26):

- Правило тестирования: предпочитать деструктуризацию `result.current`
- Проблема: В руководстве по тестам не зафиксировано предпочтение по стилю доступа к результатам хуков

## Description

Добавить в `docs/project/testing-guidelines.md` правило о предпочтении деструктуризации `result.current` при тестировании кастомных хуков.

**Проблема:**

В руководстве по тестам не зафиксировано предпочтение по стилю доступа к результатам хуков. Это может привести к:

- Неконсистентному стилю тестов
- Сниженной читаемости (многократное `result.current[0]`, `result.current[1]`)
- Отсутствию осмысленных имён переменных

**Цель:**

Добавить правило с примерами ✅/❌, которое объясняет:

- Предпочтение деструктуризации `result.current`
- Использование осмысленных имён переменных
- Преимущества подхода

**Решение:**

Добавить новую секцию "Тестирование хуков: деструктуризация result.current" после секции "Использование констант в тестах" (строка 113) с:

- Правилом
- Примером ✅ (правильно)
- Примером ❌ (неправильно)
- Списком преимуществ

## Technology Stack

- Markdown для документации
- Git для контроля версий

## Requirements

### Функциональные требования (FR)

1. **FR-01**: Добавить секцию "Тестирование хуков: деструктуризация result.current"
2. **FR-02**: Включить правило о предпочтении деструктуризации
3. **FR-03**: Добавить пример ✅ (правильно) с деструктуризацией
4. **FR-04**: Добавить пример ❌ (неправильно) с многократным `result.current`
5. **FR-05**: Перечислить преимущества подхода

### Нефункциональные требования (NFR)

1. **NFR-01**: Соответствие существующему стилю `testing-guidelines.md`
2. **NFR-02**: Ясность и однозначность правила
3. **NFR-03**: Практические примеры для понимания

## Files to Modify

1. **`docs/project/testing-guidelines.md`**
   - **Где:** После секции "Использование констант в тестах" (строка 113)
   - **Что:** Добавить новую секцию с правилом и примерами

## Implementation Plan

**Действия:**

1. Показать пользователю точный текст новой секции
2. Объяснить, где она будет добавлена (после строки 113)
3. Запросить подтверждение перед внесением изменений

### Шаг 2: Добавить секцию в `docs/project/testing-guidelines.md`

**Действия:**

1. Добавить новую секцию после "Использование констант в тестах"
2. Создать коммит с изменением

### Шаг 3: Обновить backlog.md

**Действия:**

1. Переместить задачу из раздела "Активные задачи" в "Завершённые задачи"
2. Добавить дату завершения
3. Добавить метку [x] для завершённой задачи

## Checklist реализации

- [x] Шаг 0: Создать ветку `docs/test-hook-destructuring-rule`
- [x] Шаг 0.1: Откатить изменения после нарушения правила подтверждения
- [x] Шаг 1: Показать план изменений и получить подтверждение
- [x] Шаг 2: Добавить секцию в `testing-guidelines.md`
- [x] Шаг 2.1: Обновить чеклист тестирования
- [x] Шаг 3: Обновить backlog.md (перенести в завершённые)
- [ ] Шаг 4: Создать коммит
- [ ] Шаг 5: Обновить Memory Bank (tasks.md, progress.md)

**Текущие проблемы:**

- Уже довольно компактный
- Можно добавить чеклист

**Изменения:**

1. Преобразовать список в императивы:
   - "Показывай" → "Показывать"
   - "Замещай" → "Замещать"

2. Сократить примеры:
   - Оставить 1 пример (самый показательный)
   - Убрать дублирующий пример

3. Добавить чеклист проверки:

   ```markdown
   ## Чеклист вывода кода

   - [ ] Показаны только изменяемые фрагменты
   - [ ] Контекст 2-3 строки до/после
   - [ ] Неизменные блоки заменены комментарием
   - [ ] Указаны номера строк для больших файлов
   ```

**Критерии успеха:**

- [ ] Добавлен заголовок "Правила для ИИ"
- [ ] Преобразовано в императивы
- [ ] Убран дублирующий пример
- [ ] Добавлен чеклист вывода кода
- [ ] Все правила однозначно понятны

### Шаг 5: Рефакторинг `docs/common/dev-environment.md`

## Checklist реализации

- [x] Шаг 1: Аудит файлов `docs/` и анализ проблемных зон
- [x] Шаг 1.1: Прочитать все файлы в `docs/common/` и `docs/project/`
- [x] Шаг 1.2: Определить приоритеты рефакторинга
- [x] Шаг 1.3: Создать детальный план для каждого файла
- [x] Шаг 2: Создать единый шаблон "Правила для ИИ" с заголовком
- [x] Шаг 3: Рефакторинг `docs/common/agent-docstyle-rules.md`
- [x] Шаг 4: Рефакторинг `docs/common/agent-editing-rules.md`
- [x] Шаг 5: Рефакторинг `docs/common/agent-output-rules.md`
- [x] Шаг 6: Рефакторинг `docs/common/dev-environment.md`
- [x] Шаг 7: Рефакторинг `docs/common/naming-conventions.md`
- [x] Шаг 8: Рефакторинг `docs/common/git-commit-description.md`
- [x] Шаг 9: Рефакторинг `docs/common/git-workflow.md`
- [x] Шаг 10: Рефакторинг `docs/common/memory-bank-usage.md`
- [x] Шаг 11: Рефакторинг `docs/project/testing-guidelines.md`
- [x] Шаг 12: Проверка консистентности всех файлов
- [x] Шаг 13: Финальная проверка и создание commit
